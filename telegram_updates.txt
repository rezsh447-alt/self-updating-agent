telegram_handler.py
# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ù…Ù†Ùˆ
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = str(update.message.from_user.id)
    if user_id != ADMIN_ID:
        await update.message.reply_text("âŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±ÛŒ.")
        return
    
    keyboard = [
        [InlineKeyboardButton("ğŸ“ Ø§ÙØ²ÙˆØ¯Ù† snippet", callback_data="mode_snippet")],
        [InlineKeyboardButton("ğŸ”§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ú©Ø¯", callback_data="mode_replace")],
        [InlineKeyboardButton("ğŸ¤– Ø¯Ø³ØªÙˆØ± AI", callback_data="ai_mode")],
        [InlineKeyboardButton("ğŸ“Š Ø¢Ù…Ø§Ø± Ø­Ø§ÙØ¸Ù‡", callback_data="memory_stats")],
        [InlineKeyboardButton("ğŸ¯ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù…Ù†", callback_data="my_patterns")],
        [InlineKeyboardButton("âŒ Ù„ØºÙˆ Ø­Ø§Ù„Øª", callback_data="cancel_mode")]
    ]
    await update.message.reply_text(
        "ğŸ¤– Self-Updating AI Agent\n\nØ§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù‡Ù†Ø¯Ù„Ø± Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¢Ù…Ø§Ø±
async def callback_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    data = query.data
    user_id = str(query.from_user.id)
    
    if user_id != ADMIN_ID:
        await query.edit_message_text("âŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯.")
        return
    
    if data == "memory_stats":
        stats = smart_memory.get_user_stats(user_id)
        await query.edit_message_text(
            f"ğŸ“Š Ø¢Ù…Ø§Ø± Ø­Ø§ÙØ¸Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø´Ù…Ø§:\n"
            f"â€¢ Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡: {stats['local_chats']}\n"
            f"â€¢ Ú©Ù„Ù…Ø§Øª ÛŒØ§Ø¯Ú¯Ø±ÙØªÙ‡: {stats['learned_words']}\n"
            f"â€¢ Ø§Ù†ÙˆØ§Ø¹ Ø¯Ø±Ø®ÙˆØ§Ø³Øª: {stats['request_types']}\n"
            f"â€¢ Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡: {stats['memory_usage']}\n"
            f"â€¢ Ø¢Ø®Ø±ÛŒÙ† Ú†Øª: {stats['last_chat']}\n"
            f"ğŸ’¾ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨: âœ…"
        )
    
    elif data == "my_patterns":
        insights = smart_memory.get_user_insights(user_id)
        await query.edit_message_text(insights)
